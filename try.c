#include <stdlib.h>
#include <stdio.h>
#include <string.h>

#define N 22
#define Max 10000
int start = 25, end = 25;
char name[22][15] = {"Lisbon", "Madrid", "Bern", "Rome", "Paris", "London", "Brussels", "Amsterdam", "Berlin", "Prague",
                     "Warsaw", "Bucharest", "Budapest", "Vienna", "Sarajevo", "Sofia", "Skopja", "Tirane", "Athens",
                     "Copenhagen", "Dublin", "Belfast"
};

int destinations[N][N] = {
        {0,     75,    10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000},
        {55,    0,     15,    10000, 100,   10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000},
        {10000, 45,    0,     75,    15,    10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 25,    10000, 10000, 10000, 10000, 10000, 10000, 10000},
        {10000, 10000, 75,    0,     10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000},
        {10000, 100,   35,    10000, 0,     110,   135,   10000, 10000, 10000, 10000, 10000, 10000, 75,    10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000},
        {10000, 10000, 10000, 10000, 110,   0,     10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000},
        {10000, 10000, 10000, 10000, 225,   10000, 0,     185,   65,    10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000},
        {10000, 10000, 10000, 10000, 10000, 10000, 125,   0,     45,    10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 45,    10000, 10000},
        {10000, 10000, 10000, 10000, 10000, 10000, 35,    75,    0,     45,    35,    10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000},
        {10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 55,    0,     35,    10000, 10000, 45,    10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000},
        {10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 35,    25,    0,     25,    10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000},
        {10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 25,    0,     25,    10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000},
        {10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000,    25, 0,     25,    15,    10000, 10000, 10000, 10000, 10000, 10000, 10000},
        {10000, 10000, 10000, 10000,    75, 10000, 10000, 10000, 10000, 45,    10000, 10000, 45,    0,     10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000},
        {10000, 10000, 25,    10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 25,    10000, 0,     15,    15,    10000, 10000, 10000, 10000, 10000},
        {10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 25,    0,     15,    10000, 10000, 10000, 10000, 10000},
        {10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 15,    15,    0,     15,    10000, 10000, 10000, 10000},
        {10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 35,    0,     55,    10000, 10000, 10000},
        {10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 55,    0,     10000, 10000, 10000},
        {10000, 10000, 10000, 10000, 10000, 10000, 10000, 45,    10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 0,     10000, 10000},
        {10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 0,     25},
        {10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 25,    0}

};//路程矩阵
int lengths[N][N] = {
        {0,     450,   10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000},
        {450,   0,     1500,  10000, 1300,  10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000},
        {10000, 1500,  0,     900,   600,   10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 1100,  10000, 10000, 10000, 10000, 10000, 10000, 10000},
        {10000, 10000, 900,   0,     10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000},
        {10000, 1300,  600,   10000, 0,     450,   300,   10000, 10000, 10000, 10000, 10000, 10000, 1300,  10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000},
        {10000, 10000, 10000, 10000, 450,   0,     10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000},
        {10000, 10000, 10000, 10000, 300,   10000, 0,     200,   800,   10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000},
        {10000, 10000, 10000, 10000, 10000, 10000, 200,   0,     700,   10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 800,   10000, 10000},
        {10000, 10000, 10000, 10000, 10000, 10000, 800,   700,   0,     350,   900,   10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000},
        {10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 350,   0,     850,   10000, 10000, 300,   10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000},
        {10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 900,   850,   0,     1700,  10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000},
        {10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 1700,  0,     900,   10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000},
        {10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 900,   0,     300,   600,   10000, 10000, 10000, 10000, 10000, 10000, 10000},
        {10000, 10000, 10000, 10000,  1300, 10000, 10000, 10000, 10000, 300,  10000, 10000, 300,   0,     10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000},
        {10000, 10000, 1100,  10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 600,   10000, 0,     600,   500,   10000, 10000, 10000, 10000, 10000},
        {10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 600,   0,     200,   10000, 10000, 10000, 10000, 10000},
        {10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 500,   200,   0,     200,   10000, 10000, 10000, 10000},
        {10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 200,   0,     700,   10000, 10000, 10000},
        {10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 700,   0,     10000, 10000, 10000},
        {10000, 10000, 10000, 10000, 10000, 10000, 10000, 800,   10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 0,     10000, 10000},
        {10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 0,     167},
        {10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000, 167,   0}
};

int selectNumber(char place[15]) {
    for (int i = 0; i < N; ++i) {
        if (strcmp(place, name[i]) == 0) {
            return i;
        }
    }
    return 25;
}

int main() {
    int destination[N][N];
    int length[N][N];
    //初始化
    for (int i = 0; i < N; i++) {
        for (int j = 0; j < N; ++j) {
            if (i == j) {
                destination[i][j] = 0;
                length[i][j] = 0;
            } else {
                destination[i][j] = Max;
                length[i][j] = Max;
            }
        }
    }
    int n = 0;
    FILE *fp = NULL;
    char string[225];
    fp = fopen("services.txt", "r");

    while (fgets(string, 255, fp) != NULL) {
        char str[4][15];//分割后将三个字符串放入
        char *result;//分割后的结果
        result = strtok(string, " ");
        int count = 0;
        while (result != NULL) {
            strcpy(str[count++], result);
            result = strtok(NULL, " ");
        }
        str[3][strlen(str[3]) - 1] = '\0';
        //起始顶点
        start = selectNumber(str[0]);
        printf("start: %d  ", start);
        //结束顶点
        end = selectNumber(str[1]);
        destination[start][end] = atoi(str[2]);
        length[start][end] = atoi(str[3]);
        printf("n: %d\n", n++);
    }
    fclose(fp);

    for (int i = 0; i < N; i++) {
        for (int j = 0; j < N; ++j) {
            if (destination[i][j] != destinations[i][j]) {

                printf("destination出现不同 在%d  %d\n", i, j);
                printf("%d,%d\n", destination[i][j], destinations[i][j]);
                printf("%s,%s\n", name[i], name[j]);
            }
            if (length[i][j] != lengths[i][j]) {
                printf("length出现不同 在%d  %d\n", i, j);
                printf("%d,%d\n", length[i][j], lengths[i][j]);
                printf("%s,%s\n", name[i], name[j]);
            }
        }
    }
    printf("end");
}